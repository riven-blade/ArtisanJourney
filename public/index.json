[{"content":"内容 测试的\n","permalink":"https://blog.foreverlin.cn/posts/%E6%B5%8B%E8%AF%9501/","summary":"\u003ch2 id=\"内容\"\u003e内容\u003c/h2\u003e\n\u003cp\u003e测试的\u003c/p\u003e","title":"测试01"},{"content":"内容 工具介绍 官方文档 github地址\nverdaccio 是一款高效、易用的私有 npm 仓库管理工具，特别适合中小型团队使用。它可以显著提升包管理的安全性、效率和稳定性\n工具部署 部署组件 sing-box sing-box 可以作为verdaccio 拉取上游依赖的代理程序，这是个可选组件， 当服务器访问npm官方仓库网络不好时是必要的， 使用docker部署 verdaccio 官方仓库有docker-compose.yaml 文件， 这里使用docker部署 官方docker-compose.yaml 配置文件 docker-compose.yaml version: '3' services: verdaccio: restart: always image: verdaccio/verdaccio:nightly-master environment: VERDACCIO_PUBLIC_URL: \u0026quot;https://npm.example.com\u0026quot; container_name: verdaccio ports: - \u0026quot;4873:4873\u0026quot; volumes: - \u0026quot;./storage:/verdaccio/storage\u0026quot; - \u0026quot;./conf:/verdaccio/conf\u0026quot; - \u0026quot;./plugins:/verdaccio/plugins\u0026quot; deploy: resources: limits: cpus: '2' memory: 3G sing-box: image: ghcr.io/sagernet/sing-box:v1.10.3 container_name: sing-box restart: always ports: - \u0026quot;1080:1080\u0026quot; volumes: - /etc/sing-box:/etc/sing-box - /var/lib/sing-box:/var/lib/sing-box command: - run - -D - /var/lib/sing-box - -C - /etc/sing-box 说明：\nverdaccio 支持http代理， 这里使用docker 部署， verdaccio使用容器名称访问sing-box storage 配置缓存目录持久化 plugins 插件目录持久化 resources 配置资源 sing-box 监听本地端口 1080 代理地址http://127.0.0.1:1080 config.yaml storage: /verdaccio/storage uplinks: npmjs: url: https://registry.npmjs.org/ max_fails: 10 timeout: 60s fail_timeout: 10m publish: allow_offline: true packages: '@*/*': access: $all publish: $authenticated proxy: npmjs '**': # allow all users (including non-authenticated users) to read and # publish all packages # # you can specify usernames/groupnames (depending on your auth plugin) # and three keywords: \u0026quot;$all\u0026quot;, \u0026quot;$anonymous\u0026quot;, \u0026quot;$authenticated\u0026quot; access: $all # allow all known users to publish packages # (anyone can register by default, remember?) publish: $authenticated registry proxy: npmjs http_proxy: http://sing-box:1080/ https_proxy: http://sing-box:1080/ log: { type: stdout, format: pretty-timestamped, level: warn } 说明：\nuplinks 是上游地址配置，当verdaccio 缺失包的时候， 会从这会仓库地址拉取，并缓存 由于国内拉去官方npmjs 包很慢并且有时会报500网络错误， 需要sing-box 做一层代理 ","permalink":"https://blog.foreverlin.cn/posts/verdaccio-%E5%BC%80%E6%BA%90%E5%B7%A5%E5%85%B7/","summary":"\u003ch2 id=\"内容\"\u003e内容\u003c/h2\u003e\n\u003ch3 id=\"工具介绍\"\u003e工具介绍\u003c/h3\u003e\n\u003cp\u003e\u003ca href=\"https://verdaccio.org\"\u003e官方文档\u003c/a\u003e \u003ca href=\"https://github.com/verdaccio/verdaccio\"\u003egithub地址\u003c/a\u003e\u003cbr\u003e\nverdaccio 是一款高效、易用的私有 npm 仓库管理工具，特别适合中小型团队使用。它可以显著提升包管理的安全性、效率和稳定性\u003c/p\u003e\n\u003ch3 id=\"工具部署\"\u003e工具部署\u003c/h3\u003e\n\u003ch4 id=\"部署组件\"\u003e部署组件\u003c/h4\u003e\n\u003col\u003e\n\u003cli\u003esing-box\nsing-box 可以作为verdaccio 拉取上游依赖的代理程序，这是个可选组件， 当服务器访问npm官方仓库网络不好时是必要的， 使用docker部署\u003c/li\u003e\n\u003cli\u003everdaccio\n官方仓库有docker-compose.yaml 文件， 这里使用docker部署\n\u003ca href=\"https://github.com/verdaccio/verdaccio/blob/master/docker-compose.yaml\"\u003e官方docker-compose.yaml\u003c/a\u003e\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch4 id=\"配置文件\"\u003e配置文件\u003c/h4\u003e\n\u003col\u003e\n\u003cli\u003edocker-compose.yaml\u003c/li\u003e\n\u003c/ol\u003e\n\u003c!-- --\u003e\n\u003cpre\u003e\u003ccode\u003eversion: '3'\n\nservices:\n  verdaccio:\n    restart: always\n    image: verdaccio/verdaccio:nightly-master\n    environment:\n      VERDACCIO_PUBLIC_URL: \u0026quot;https://npm.example.com\u0026quot;\n    container_name: verdaccio\n    ports:\n      - \u0026quot;4873:4873\u0026quot;\n    volumes:\n        - \u0026quot;./storage:/verdaccio/storage\u0026quot;\n        - \u0026quot;./conf:/verdaccio/conf\u0026quot;\n        - \u0026quot;./plugins:/verdaccio/plugins\u0026quot;\n    deploy:\n      resources:\n        limits:\n          cpus: '2'\n          memory: 3G\n  sing-box:\n    image: ghcr.io/sagernet/sing-box:v1.10.3\n    container_name: sing-box\n    restart: always\n    ports:\n      - \u0026quot;1080:1080\u0026quot;\n    volumes:\n      - /etc/sing-box:/etc/sing-box\n      - /var/lib/sing-box:/var/lib/sing-box\n    command: \n      - run\n      - -D\n      - /var/lib/sing-box\n      - -C\n      - /etc/sing-box\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e说明：\u003c/p\u003e","title":"verdaccio 开源工具"}]